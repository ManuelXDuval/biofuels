devnull <- sapply(c("httr2", "jsonlite"), library, character.only = TRUE)
api_key <- Sys.getenv("API_KEY")
eia_url <- "https://api.eia.gov/v2/"
# getting body data with httr2 request()
EIA_Query_routes <- request(eia_url) %>%
req_headers(`x-api-key`  = api_key) %>%
req_perform()
routes_result <- resp_body_json(EIA_Query_routes)
eia_routes <- do.call(
rbind, lapply(
1:length(routes_result[[1]][[4]]), \(i) t(routes_result[[1]][[4]][[i]]))) %>%
as.data.frame()
eia_routes$description <- gsub("\r\n        ", "", eia_routes$description)
DT::datatable(eia_routes, caption = "EIA routes")
install.packages("Air")
EEIA_petroleum_cons_Query <- request(paste0(eia_url, "petroleum/cons/")) %>%
req_headers(`x-api-key` = api_key) %>%
req_perform()
petroleum_routes_cons_result <- resp_body_json(EIA_petroleum_cons_Query)
petroleum_routes_cons_result
EEIA_petroleum_cons_Query
save.image()
q()
devnull <- sapply(c("httr2", "jsonlite"), library, character.only = TRUE)
api_key <- Sys.getenv("API_KEY")
EIA_petroleum_Query <- request(paste0(eia_url, "seds/")) %>%
req_headers(`x-api-key`  = api_key) %>%
req_perform()
EIA_seds_Query <- request(paste0(eia_url, "seds/")) %>%
req_headers(`x-api-key`  = api_key) %>%
req_perform()
seds_routes_result <- resp_body_json(EIA_seds_Query)
EIA_seds_Query <- request(paste0(eia_url, "seds/")) %>%
req_headers(`x-api-key`  = api_key) %>%
req_perform()
seds_routes_result <- resp_body_json(EIA_seds_Query)
eia_seds_routes <- do.call(
rbind, lapply(
1:length(seds_routes_result[[1]][[4]]), \(i) t(seds_routes_result[[1]][[4]][[i]]))) %>%
as.data.frame()
DT::datatable(eia_seds_routes, caption = "EIA SEDS routes")
EIA_seds_Query <- request(paste0(eia_url, "seds/")) %>%
req_headers(`x-api-key`  = api_key) %>%
req_perform()
seds_routes_result <- resp_body_json(EIA_seds_Query)
eia_seds_routes[[1]]
eia_seds_routes[[2]]
eia_seds_routes[[3]]
eia_seds_routes[[4]]
eia_seds_routes[[5]]
q()
q()
q()
save.image()
q()
q()
384*2
388 *2
q()
?request
#####
##Feb 08, 2027: Diesel production
library(httr)
?request
#####
##Feb 08, 2027: Diesel production
library(httr2)
?request
EIA_petroleum_pnp_Query <- request(paste0(eia_url, "petroleum/pnp/")) %>%
req_headers(`x-api-key` = api_key) %>%
req_perform()
class(EIA_petroleum_pnp_Query)
EIA_petroleum_pnp.httrRes <- request(paste0(eia_url, "petroleum/pnp/")) %>%
req_headers(`x-api-key` = api_key) %>%
req_perform()
EIA_petroleum_pnp.httrRes
?resp_body_json
petroleum_routes_pnp_result <- resp_body_json(EIA_petroleum_pnp.httrRes)
class(petroleum_routes_pnp_result)
petroleum_routes_pnp.list <- resp_body_json(EIA_petroleum_pnp.httrRes)
eia_petroleum_pnp_routes <- do.call(
rbind,
lapply(
1:length(petroleum_routes_pnp.list[[1]][[4]]),
\(i) t(petroleum_routes_pnp.list[[1]][[4]][[i]])
)
) %>%
as.data.frame()
eia_petroleum_pnp_routes
petroleum_pnp.list <- resp_body_json(EIA_petroleum_pnp.httrRes)
petroleum_pnp.list <- resp_body_json(EIA_petroleum_pnp.httrRes)
list(petroleum_pnp.list)
length(petroleum_pnp.list)
petroleum_pnp.list[[1]]
petroleum_pnp.list[[2]]
petroleum_pnp.list[[3]]
petroleum_pnp.list[[4]]
length(petroleum_pnp.list[[1]])
class(petroleum_pnp.list[[1]][[1]])
petroleum_pnp.list[[1]][[1]]
petroleum_pnp.list[[1]][[1]]
petroleum_pnp.list[[1]][[2]]
petroleum_pnp.list[[1]][[3]]
petroleum_pnp.list[[1]][[4]]
eia_petroleum_pnp_routes <- do.call(
rbind,
lapply(
1:length(petroleum_pnp.list[[1]][[4]]),
\(i) t(petroleum_pnp.list[[1]][[4]][[i]])
)
) %>%
as.data.frame()
DT::datatable(eia_petroleum_pnp_routes, caption = "EIA Petroleum routes")
EIA_petroleum_pnp_wprodr.httrRes <- request(paste0(eia_url, "petroleum/pnp/wprodr/")) %>%
req_headers(`x-api-key` = api_key) %>%
req_perform()
EIA_petroleum_pnp_wprodr.httrRes
petroleum_pnp_wprodr.list <- resp_body_json(EIA_petroleum_pnp_wprodr.httrRes)
length(petroleum_pnp_wprodr.list)
petroleum_pnp_wprodr.list[[2]]
petroleum_pnp_wprodr.list[[3]]
petroleum_pnp_wprodr.list[[4]]
length(petroleum_pnp_wprodr.list[[1]])
petroleum_pnp_wprodr.list[[1]][[1]]
petroleum_pnp_wprodr.list[[1]][[2]]
petroleum_pnp_wprodr.list[[1]][[3]]
petroleum_pnp_wprodr.list[[1]][[4]]
sapply(1:9, \(i) names(petroleum_pnp_wprodr.list[[1]][[i]]))
petroleum_pnp_wprodr.list[[1]][[1]]
sapply(1:9, \(i) class(petroleum_pnp_wprodr.list[[1]][[i]]))
sapply(1:9, \(i) class(petroleum_pnp_wprodr.list[[1]][[i]]))
class(petroleum_pnp_wprodr.list[[1]][[5]]])
class(petroleum_pnp_wprodr.list[[1]][[5]])
length(petroleum_pnp_wprodr.list[[1]][[5]])
head(petroleum_pnp_wprodr.list[[1]][[5]])
head(petroleum_pnp_wprodr.list[[1]][[4]])
head(petroleum_pnp_wprodr.list[[1]][[3]])
head(petroleum_pnp_wprodr.list[[1]][[9]])
head(petroleum_pnp_wprodr.list[[1]][[8]])
head(petroleum_pnp_wprodr.list[[1]][[7]])
head(petroleum_pnp_wprodr.list[[1]][[6]])
head(petroleum_pnp_wprodr.list[[1]][[5]])
petroleum_pnp_wprodr.list[[1]][[6]]
EIA_petroleum_pnp_wprodr.httrRes <- request(paste0(eia_url, "petroleum/pnp/wprodr/data")) %>%
req_headers(`x-api-key` = api_key) %>%
req_perform()
EIA_petroleum_pnp_wprodr.httrRes
petroleum_pnp_wprodr.list[[1]][[1]]
petroleum_pnp_wprodr.list[[1]][[2]]
petroleum_pnp_wprodr.list[[1]][[3]]
petroleum_pnp_wprodr.list[[1]][[4]]
petroleum_pnp_wprodr.list[[1]][[5]]
petroleum_pnp_wprodr.list[[1]][[6]]
petroleum_pnp_wprodr.list[[1]][[7]]
petroleum_pnp_wprodr.list[[1]][[8]]
petroleum_pnp_wprodr.list[[1]][[9]]
petroleum_pnp_wprodr.list[]
q()
